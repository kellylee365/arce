<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0058)http://www.positioniseverything.net/explorer/peekaboo.html -->
<HTML lang=en xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>Peek-a-boo IE6 Bug</TITLE>
<META content="25 May, 2002" name="Big John">
<META http-equiv=content-Type content="text/html; charset=iso-8859-1">
<META content=true name=mssmarttagspreventparsing>
<META 
content="demo,test,big john,big,john,positioniseverything,css,html,what else do you want from me!?" 
name=keywords>
<META content=" A demo explaining fixes for disappearing text in IE6. " 
name=description>
<META content=global name=distribution>
<META content=document name=resource-type>
<META content=all name=robots>
<META http-equiv=imagetoolbar content=no><LINK href="favicon.ico" 
rel="SHORTCUT ICON">
<STYLE type=text/css>HTML {
	PADDING-RIGHT: 0px; PADDING-LEFT: 0px; PADDING-BOTTOM: 0px; MARGIN: 0px; WIDTH: 100%; PADDING-TOP: 0px; HEIGHT: 100%
}
BODY {
	PADDING-RIGHT: 0px; PADDING-LEFT: 0px; FONT-SIZE: 90%; BACKGROUND: #eff; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px; FONT-FAMILY: verdana, sans-serif; TEXT-ALIGN: center
}
.wrapper {
	MARGIN: 0px auto; WIDTH: 90%; TEXT-ALIGN: left; min-width: 750px; max-width: 1100px
}
.alignright {
	MARGIN: 0px 7% 1em 0px; TEXT-ALIGN: right
}
.small {
	FONT-SIZE: 0.9em
}
A {
	BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; COLOR: #000; BORDER-RIGHT-WIDTH: 0px
}
H1 {
	PADDING-RIGHT: 3px; PADDING-LEFT: 3px; FONT-SIZE: 22px; BACKGROUND: #000; PADDING-BOTTOM: 3px; MARGIN: 0px; COLOR: #fff; PADDING-TOP: 3px; BORDER-BOTTOM: #fff 3px solid; TEXT-ALIGN: center
}
H4 {
	FONT-WEIGHT: bold; FONT-SIZE: 1.2em; MARGIN: 1.5em 10% 0.5em
}
P {
	MARGIN: 0px 5% 0.8em 4em
}
OL {
	MARGIN: 20px 20%
}
H2 {
	FONT-SIZE: 1.2em
}
H2 SPAN {
	FONT-SIZE: 0.8em
}
DIV#floatholder A:hover {
	BACKGROUND: #f99
}
#clear {
	CLEAR: both; BORDER-RIGHT: #f0f 3px solid; BORDER-TOP: #f0f 3px solid; BORDER-LEFT: #f0f 3px solid; BORDER-BOTTOM: #f0f 3px solid; TEXT-ALIGN: center
}
#floatholder {
	BORDER-RIGHT: #000 3px dotted; BORDER-TOP: #000 3px dotted; FONT-SIZE: 1.1em; BACKGROUND: #fed; MARGIN: 1em 15% 1em 13%; BORDER-LEFT: #000 3px dotted; BORDER-BOTTOM: #000 3px dotted
}
#float {
	BORDER-RIGHT: #844 6px solid; PADDING-RIGHT: 5px; BORDER-TOP: #844 6px solid; PADDING-LEFT: 5px; FONT-SIZE: 2em; FLOAT: left; PADDING-BOTTOM: 5px; BORDER-LEFT: #844 6px solid; WIDTH: 200px; PADDING-TOP: 5px; BORDER-BOTTOM: #844 6px solid; HEIGHT: 200px; TEXT-ALIGN: center
}
#float SPAN {
	BACKGROUND: #9c9; COLOR: white
}
</STYLE>

<META content="MSHTML 6.00.2800.1314" name=GENERATOR></HEAD>
<BODY>
<H1>&nbsp;&nbsp;IE6 Peekaboo Bug&nbsp;&nbsp;&nbsp; </H1>
<DIV class=wrapper>
<P class=alignright><A 
href="http://www.positioniseverything.net/explorer.html"><STRONG>Return to 
Explorer Exposed</STRONG></A><BR><A 
href="http://www.positioniseverything.net/explorer/inherited_margin.html"><STRONG>Next 
IE demo</STRONG></A> </P><BR>
<H2>The setup:</H2>
<P>A liquid box has a float inside, and content that appears along side that 
float. All is well, until it's viewed in IE6. "Wah? Where's my content?!" You 
reload the page, and nothing. When you scroll down, or perhaps switch to another 
window, upon returning to the 'scene of the crime' there it all is, fat 'n 
sassy! </P>
<P><STRONG>Note:</STRONG> <EM>This long standing bug has been suppressed</EM> in 
<STRONG>IE7</STRONG> (released in late 2006), so the Peekaboo Bug is finally on 
the way out. IE6 will still exist however, and as long as it does we'll need to 
fix it. </P>
<H2>The demo:</H2>
<P>div#floatholder (dotted border) is dimensioned horizontally by margins, and 
vertically by content. div#float (thick brown border) is floated left, and 
contains a test link. Following that are several lines of bare text, alternating 
with divs containing more text, plus test links. Next is a cleared div (purple 
border), then another div for good measure. </P><!--********** Start of demo ***********-->
<DIV id=floatholder>
<DIV id=float><BR><SPAN>&nbsp;Float&nbsp; <BR><BR><A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">&nbsp;test 
link&nbsp;</A> </SPAN></DIV>This is bare text. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test link</A> 

<DIV 
style="BORDER-RIGHT: #f00 3px solid; BORDER-TOP: #f00 3px solid; BACKGROUND: #dde; BORDER-LEFT: #f00 3px solid; BORDER-BOTTOM: #f00 3px solid">This 
is text inside a div. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test 
link</A></DIV>This is bare text. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test link</A> 

<DIV 
style="BORDER-RIGHT: #0c0 3px solid; BORDER-TOP: #0c0 3px solid; BACKGROUND: #dde; BORDER-LEFT: #0c0 3px solid; BORDER-BOTTOM: #0c0 3px solid">This 
is text inside a div. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test 
link</A></DIV>This is bare text. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test link</A> 

<DIV 
style="BORDER-RIGHT: #00f 3px solid; BORDER-TOP: #00f 3px solid; BACKGROUND: #dde; BORDER-LEFT: #00f 3px solid; BORDER-BOTTOM: #00f 3px solid">This 
is text inside a div. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test 
link</A></DIV>This is bare text. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test link</A> 

<DIV id=clear>Clearing div</DIV><!--******* Note: a cleared <br> will not prevent bug *******-->
<DIV 
style="BORDER-RIGHT: #00f 3px solid; BORDER-TOP: #00f 3px solid; BACKGROUND: #dde; BORDER-LEFT: #00f 3px solid; BORDER-BOTTOM: #00f 3px solid">This 
div is after the cleared div. (purple box) If cleared div does not touch float, 
bug is not triggered. <A 
href="http://www.positioniseverything.net/explorer/peekaboo.html#">Test 
link</A></DIV></DIV><!--********** End of demo ***********-->
<P>To reset bug, reload page. <A 
href="http://www.positioniseverything.net/explorer/images/peekaboo1.gif">Screenshot</A> 
&nbsp;<BR></P>
<H2>The bugs:</H2>
<P>This effect may turn up in a number of different contexts. We would try to 
list them here, but the page would become very long, and make our heads hurt. 
</P>
<H2>Fun with links:</H2>
<P>Try clicking the links. This will reveal the missing content, same as 
scrolling. If the float is a linked image, same deal. But only links within 
div#floatholder, and before the clearing div will expose the missing 
content.<BR>But check out the last link in the content area. Weird! </P>
<H2>Special notes:</H2>
<P>Multiple repetitions of the content div containing the triggers can behave 
very strangely. As argued on css-d, it appears to be triggered by the clearing 
div. When it is forced to clear a float, the previous content after the float 
gets covered somehow, perhaps by the background on div#floatholder. (dotted 
border) </P>
<H2>The fixes:</H2>
<P>Finally, this bug will be triggered even if div#float preceeds 
div#floatholder, provided that this external float actually touches the clearing 
div within div#floatholder!<BR></P>
<P>There are three ways we know to prevent this bug. </P>
<OL>
  <LI>Keep the clearing div from touching the float, or avoid using a background 
  on div#floatholder. Not exactly ideal. 
  <LI>Give both div#floatholder and div#float 'position: relative'. Be sure to 
  fully test this method. 
  <LI>Give div#floatholder <A 
  href="http://www.satzansatz.de/cssd/onhavinglayout.html"><STRONG>hasLayout</STRONG></A> 
  (now the preferred method) </LI></OL>
<P>We suggest using a conditional comment to feed a hasLayout fix to IE6 and 
below only. Further details helpful to this method may be found <A 
href="http://www.positioniseverything.net/articles/ie7-dehacker.html"><STRONG>here</STRONG></A>. 
</P>
<P>Thanks to <A href="http://simonwillison.net/"><STRONG>Simon 
Willison</STRONG></A> for the timely screenshot. </P><BR>
<P class="small alignright"><A 
title=" Holly 'n John's Tableless Design and Repair " 
href="http://www.positioniseverything.net/design/"><STRONG>Holly 'n 
John</STRONG></A> &nbsp; Contact <A 
href="mailto:holly@communitymx.com">Holly</A> Contact <A 
title="If you've found something new and interesting, let us know! " 
href="mailto:johnthebig66@yahoo.com">John</A> ©positioniseverything<BR>Last 
updated: April 10, 2007<BR>Created July 7, 2002 </P>&nbsp; </DIV></BODY></HTML>
