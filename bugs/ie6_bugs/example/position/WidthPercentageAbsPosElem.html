<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
<title>Width percentage of absolutely positioned element [Anonymoused]</title>
<style type="text/css">
body {margin: 8px; padding: 0px; color: black; background-color: white;}
#SpanId {font-size: 125%; color: green; font-weight: bold;}
#validation img {margin: 0.5em;}
</style>

<script type="text/javascript">
function ToggleDivPosition()
{
if(document.getElementById("idMostInnerDiv").style.position == "absolute")
	{
	document.getElementById("idMostInnerDiv").style.position = "static";
	document.getElementById("SpanId").childNodes[0].nodeValue = "static";
	}
else
	{
	document.getElementById("idMostInnerDiv").style.position = "absolute";
	document.getElementById("SpanId").childNodes[0].nodeValue = "absolute";
	};
}
</script>
</head>

<body>

<div style="width: 80%; border: solid red;">This div has style="width: 80%; border: solid red;"
	<div style="width: 80%; border: solid blue;">This div has style="width: 80%; border: solid blue;"
		<div id="idMostInnerDiv" style="width: 80%; border: solid silver; position: absolute; top: 4em;">This div has style="width: 80%; border: solid silver;"
		</div>
	</div>
</div>

<form action="http://anonymouse.org/cgi-bin/anon-www.cgi/http://www.gtalbot.org/BrowserBugsSection/MSIE6Bugs/WidthPercentageAbsPosElem.html" style="margin-top: 4em;">
<p><input type="button" onclick="ToggleDivPosition();" value="Toggle Absolute | Static position"><br>The silver div position is now <span id="SpanId">absolute</span>.</p>
<p>When the silver-bordered div is absolutely positioned, it should be <strong>at least as wide</strong> as the red-bordered div. (Its width depends on how exactly the user agent implements the "initial containing block": the "initial containing block" should be <strong>at least as large as, as wide as</strong> the document root element.</p>
</form>

<p>References:</p>

<ul>
<li><a href="http://anonymouse.org/cgi-bin/anon-www.cgi/http://www.opera.com/docs/specs/opera6/#css">Opera on absolute positioning</a> says<br>
"A positioned element should be positioned to the nearest containing positioned element, not the containing element."</li>
<li>
<a href="http://anonymouse.org/cgi-bin/anon-www.cgi/http://www.w3.org/TR/CSS21/visuren.html#q28">CSS 2.1 9 Visual formatting model section 9.8.4 Absolute positioning</a> says:<br>
"The containing block for a positioned box is established by the nearest positioned ancestor (or, if none exists, the initial containing block)"</li>
<li>
<a href="http://anonymouse.org/cgi-bin/anon-www.cgi/http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">CSS 2.1 Section 10.1 Definition of "containing block"</a> says:<br>

<blockquote cite="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details"><p>With no positioning, the containing blocks (C.B.) in the
following document:</p>

<pre><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
   &lt;HEAD&gt;
      &lt;TITLE&gt;Illustration of containing blocks&lt;/TITLE&gt;

   &lt;/HEAD&gt;

   &lt;BODY id="body"&gt;
      &lt;DIV id="div1"&gt;
      &lt;P id="p1"&gt;This is text in the first paragraph...&lt;/P&gt;
      &lt;P id="p2"&gt;This is text &lt;EM id="em1"&gt; in the
      &lt;STRONG id="strong1"&gt;second&lt;/STRONG&gt; paragraph.&lt;/EM&gt;&lt;/P&gt;

      &lt;/DIV&gt;
   &lt;/BODY&gt;
&lt;/HTML&gt;
</code></pre>

<p>are established as follows:</p>

<table border="1">
<tbody><tr><th>For box generated by </th>

<td><strong>C.B. is established by</strong></td></tr>

<tr><td>html</td><td>initial C.B. (UA-dependent)</td></tr>
<tr><td>body</td><td>html</td></tr>
<tr><td>div1</td><td>body</td></tr>
<tr><td>p1</td><td>div1</td></tr>
<tr><td>p2</td><td>div1</td></tr>

<tr><td>em1</td><td>p2</td></tr>

<tr><td>strong1</td><td>p2</td></tr>
</tbody></table>

<p style="font-size: x-large;">If we position "div1":</p>

<pre style="font-size: x-large;">   #div1 { position: absolute; left: 50px; top: 50px }</pre>

<p style="font-size: x-large;">its containing block is no longer "body"; it becomes
the initial containing block (since there are no other positioned ancestor boxes).</p>

</blockquote>
</li>
</ul>
</body>
</html>
<!--
Opera 6.06 build 1145 renders that page correctly but none of Opera 7.x renders that page correctly and Opera 8.x does not render that page correctly.
Opera 9 beta 1 has fixed this bug.
-->